{
    "StreakHistory": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["Streak_id", "Partnership_id", "Habit_id", "Streak_start_date"],
        "properties": {
          "Streak_id": {
            "bsonType": "objectId",
            "description": "Primary key"
          },
          "Partnership_id": {
            "bsonType": "objectId",
            "description": "Foreign key reference to Partnership"
          },
          "Habit_id": {
            "bsonType": "objectId",
            "description": "Foreign key reference to Habit"
          },
          "Streak_start_date": {
            "bsonType": "date",
            "description": "Date the streak started"
          },
          "Streak_end_date": {
            "bsonType": "date",
            "description": "Date the streak ended (null if ongoing)"
          },
          "Streak_length_days": {
            "bsonType": "int",
            "description": "Total length of streak in days",
            "minimum": 0
          },
          "Ended_reason": {
            "enum": ["missed_checkin", "partnership_ended", "habit_archived", "ongoing"],
            "description": "Reason the streak ended"
          },
          "Created_at": {
            "bsonType": "date",
            "description": "Record creation timestamp"
          }
        }
      },
      "indexes": [
        {"key": {"Partnership_id": 1, "Habit_id": 1}},
        {"key": {"Streak_start_date": 1}}
      ]
    }
  }